<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Super Clicker - 1 Minute Challenge</title>
    <style>
        * { touch-action: manipulation; user-select: none; -webkit-user-select: none; }
        body { margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background-color: #f0f3f5; font-family: sans-serif; }
        
        /* สไตล์นาฬิกาจับเวลา */
        #timer-container { font-size: 24px; font-weight: bold; color: #e74c3c; margin-bottom: 10px; background: white; padding: 5px 20px; border-radius: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        #score-container { text-align: center; margin-bottom: 20px; }
        #score { font-size: 60px; font-weight: bold; color: #2c3e50; margin: 0; }
        .label { color: #7f8c8d; text-transform: uppercase; letter-spacing: 2px; }
        
        #main-btn { width: 200px; height: 200px; border-radius: 50%; border: 8px solid #fff; background: linear-gradient(145deg, #3498db, #2980b9); box-shadow: 0 10px 20px rgba(0,0,0,0.1); color: white; font-size: 24px; font-weight: bold; display: flex; align-items: center; justify-content: center; transition: transform 0.1s; cursor: pointer; }
        #main-btn:active { transform: scale(0.9); }
        #main-btn.disabled { background: #bdc3c7; cursor: default; pointer-events: none; }

        .shop { margin-top: 30px; width: 90%; max-width: 300px; }
        .upgrade-btn { width: 100%; padding: 15px; margin-bottom: 10px; border: none; border-radius: 10px; background-color: #2ecc71; color: white; font-size: 16px; font-weight: bold; box-shadow: 0 4px #27ae60; }
        .upgrade-btn:disabled { background-color: #bdc3c7; box-shadow: 0 4px #95a5a6; }
    </style>
</head>
<body>

    <div id="timer-container">เวลาเหลือ: <span id="time">60</span> วินาที</div>

    <div id="score-container">
        <p class="label">แต้มของคุณ</p>
        <h1 id="score">0</h1>
    </div>

    <div id="main-btn" onclick="addScore()">กดเลย!</div>

    <div class="shop">
        <button id="up-btn" class="upgrade-btn" onclick="buyUpgrade()" disabled>
            เพิ่มพลังคลิก (ใช้ 50 แต้ม)
        </button>
        <p style="text-align:center; font-size: 12px; color: #7f8c8d;">
            ขณะนี้: 1 คลิก = <span id="per-click">1</span> แต้ม
        </p>
        <button onclick="resetGame()" style="width:100%; background:none; border:none; color:#e74c3c; font-size:12px; margin-top:10px; cursor:pointer;">เริ่มเกมใหม่ / รีเซ็ต</button>
    </div>

    <script>
        let score = 0;
        let power = 1;
        let upgradeCost = 50;
        let timeLeft = 60; // ตั้งเวลา 60 วินาที
        let timerId = null;
        let gameActive = false;

        function startTimer() {
            if (gameActive) return; // ถ้าเริ่มไปแล้วไม่ต้องเริ่มซ้ำ
            gameActive = true;
            
            timerId = setInterval(() => {
                timeLeft--;
                document.getElementById("time").innerText = timeLeft;

                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function addScore() {
            if (timeLeft <= 0) return; // ถ้าหมดเวลาแล้วกดไม่ได้
            if (!gameActive) startTimer(); // เริ่มจับเวลาเมื่อมีการกดครั้งแรก

            score += power;
            updateDisplay();
        }

        function endGame() {
            clearInterval(timerId);
            gameActive = false;
            document.getElementById("main-btn").classList.add("disabled");
            document.getElementById("main-btn").innerText = "หมดเวลา!";
            alert("จบเกม! คุณทำคะแนนได้: " + score + " แต้ม");
        }

        function buyUpgrade() {
            if (score >= upgradeCost && timeLeft > 0) {
                score -= upgradeCost;
                power += 1;
                upgradeCost = Math.round(upgradeCost * 1.5);
                updateDisplay();
            }
        }

        function updateDisplay() {
            document.getElementById("score").innerText = score;
            document.getElementById("per-click").innerText = power;
            
            const upBtn = document.getElementById("up-btn");
            upBtn.innerText = `เพิ่มพลังคลิก (ใช้ ${upgradeCost} แต้ม)`;
            upBtn.disabled = score < upgradeCost || timeLeft <= 0;
        }

        function resetGame() {
            clearInterval(timerId);
            score = 0;
            power = 1;
            upgradeCost = 50;
            timeLeft = 60;
            gameActive = false;
            
            document.getElementById("time").innerText = timeLeft;
            document.getElementById("main-btn").classList.remove("disabled");
            document.getElementById("main-btn").innerText = "กดเลย!";
            updateDisplay();
        }
    </script>
</body>
</html>
